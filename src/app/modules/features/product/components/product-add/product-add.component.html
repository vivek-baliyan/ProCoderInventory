<!-- Body: Body -->
<div class="body d-flex py-3">
  <div class="container-xxl">
    <div class="row align-items-center">
      <div class="border-0 mb-4">
        <div
          class="card-header py-3 no-bg bg-transparent d-flex align-items-center px-0 justify-content-between border-bottom flex-wrap"
        >
          <h3 class="fw-bold mb-0">Products Add</h3>
          <button
            type="button"
            class="btn btn-primary btn-set-task w-sm-100 py-2 px-5 text-uppercase"
            (click)="saveProduct()"
          >
            Save
          </button>
        </div>
      </div>
    </div>
    <!-- Row end  -->
    <form [formGroup]="addProductForm">
      <div class="row g-3 mb-3">
        <div class="col-xl-4 col-lg-4">
          <div class="sticky-lg-top">
            <div class="card mb-3">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Pricing Info</h6>
              </div>
              <div class="card-body">
                <div class="row g-3 align-items-center">
                  <div class="col-md-12">
                    <label class="form-label">Cost Price</label>
                    <input
                      type="number"
                      class="form-control"
                      formControlName="costPrice"
                      [class.is-invalid]="isCostPriceValid"
                      min="0"
                      step="0.01"
                    />
                    @if(isCostPriceValid) {
                    <div class="invalid-feedback">
                      Cost Price must be 0 or greater
                    </div>
                    }
                  </div>

                  <div class="col-md-12">
                    <label class="form-label"
                      >Selling Price
                      <span class="text-danger">*</span></label
                    >
                    <input
                      type="number"
                      class="form-control"
                      formControlName="sellingPrice"
                      [class.is-invalid]="isSellingPriceValid"
                      min="0"
                      step="0.01"
                    />
                    @if(isSellingPriceValid) {
                    <div class="invalid-feedback">
                      Selling Price must be 0 or greater
                    </div>
                    }
                  </div>
                </div>
              </div>
            </div>
            <div class="card mb-3">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Visibility Status</h6>
              </div>
              <div class="card-body">
                <div class="form-check" *ngFor="let option of productStatusOptions">
                  <input
                    class="form-check-input"
                    type="radio"
                    [id]="'status-' + option.value"
                    [value]="option.value"
                    formControlName="status"
                  />
                  <label
                    class="form-check-label"
                    [for]="'status-' + option.value"
                    >{{ option.label }}</label
                  >
                </div>
              </div>
            </div>
            <div class="card mb-3">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Product Type</h6>
              </div>
              <div class="card-body">
                <div class="form-check" *ngFor="let option of productTypeOptions">
                  <input
                    class="form-check-input"
                    type="radio"
                    [id]="'productType-' + option.value"
                    [value]="option.value"
                    formControlName="productType"
                  />
                  <label
                    class="form-check-label"
                    [for]="'productType-' + option.value"
                    >{{ option.label }}</label
                  >
                </div>
              </div>
            </div>
            <div class="card mb-3">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Product Options</h6>
              </div>
              <div class="card-body">
                <div class="row g-3 align-items-center">
                  <div class="col-md-12">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="isActive"
                        formControlName="isActive"
                      />
                      <label class="form-check-label" for="isActive">
                        Is Active
                      </label>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="isTaxable"
                        formControlName="isTaxable"
                      />
                      <label class="form-check-label" for="isTaxable">
                        Is Taxable
                      </label>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="trackInventory"
                        formControlName="trackInventory"
                      />
                      <label class="form-check-label" for="trackInventory">
                        Track Inventory
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card mb-3">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Tags</h6>
              </div>
              <div class="card-body">
                <div class="form-group demo-tagsinput-area">
                  <div class="form-line">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Enter tags separated by commas"
                      (input)="onTagsChange($event)"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="card mb-3">
              <div class="card-body">
                <label class="form-label"
                  >Select Categories</label
                >
                <div class="form-check" *ngFor="let category of categories">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    [id]="'category-' + category.id"
                    [value]="category.id"
                    (change)="onCategoryChange(category.id, $any($event.target).checked)"
                  />
                  <label
                    class="form-check-label"
                    [for]="'category-' + category.id"
                    >{{ category.name }}</label
                  >
                </div>
              </div>
            </div>
            <div class="card">
              <div
                class="card-header py-3 d-flex justify-content-between align-items-center bg-transparent border-bottom-0"
              >
                <h6 class="m-0 fw-bold">Product Codes</h6>
              </div>
              <div class="card-body">
                <div class="row g-3 align-items-center">
                  <div class="col-md-12">
                    <label class="form-label">SKU</label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="sku"
                      [class.is-invalid]="isSkuValid"
                      maxlength="100"
                    />
                    @if (isSkuValid) {
                    <div class="invalid-feedback">Please enter a valid SKU</div>
                    }
                  </div>
                  <div class="col-md-12">
                    <label class="form-label">UPC</label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="upc"
                      maxlength="50"
                    />
                  </div>
                  <div class="col-md-12">
                    <label class="form-label">EAN</label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="ean"
                      maxlength="50"
                    />
                  </div>
                  <div class="col-md-12">
                    <label class="form-label">ISBN</label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="isbn"
                      maxlength="50"
                    />
                  </div>
                  <div class="col-md-12">
                    <label class="form-label">Manufacturer Part Number</label>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="manufacturerPartNumber"
                      maxlength="100"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-8 col-lg-8">
          <div class="card mb-3">
            <div
              class="card-header py-3 d-flex justify-content-between bg-transparent border-bottom-0"
            >
              <h6 class="mb-0 fw-bold">Basic information</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label"
                    >Name <span class="text-danger">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    name="productName"
                    formControlName="name"
                    [class.is-invalid]="isNameValid"
                  />
                  @if(isNameValid) {
                  <div class="invalid-feedback">Please enter a valid name</div>
                  }
                </div>
                <div class="col-md-6">
                  <label class="form-label">Product Type</label>
                  <select class="form-select" formControlName="productType">
                    <option *ngFor="let option of productTypeOptions" [value]="option.value">
                      {{ option.label }}
                    </option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Unit of Measurement</label>
                  <input
                    type="text"
                    class="form-control"
                    formControlName="unitOfMeasurement"
                    placeholder="e.g., Pieces, Kg, Liters"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">HSN/SAC Code</label>
                  <input
                    type="text"
                    class="form-control"
                    formControlName="hsnSacCode"
                    placeholder="Enter HSN or SAC code"
                  />
                </div>
                <div class="col-md-12">
                  <label class="form-label">Product Description</label>
                  <textarea
                    class="form-control"
                    name="description"
                    formControlName="description"
                    maxlength="1000"
                    rows="4"
                  ></textarea>
                </div>
                <div class="col-md-12">
                  <label class="form-label">Custom Fields</label>
                  <textarea
                    class="form-control"
                    formControlName="customFields"
                    maxlength="2000"
                    rows="3"
                    placeholder="Enter custom fields as JSON or text"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Sales Information Card -->
          <div class="card mb-3">
            <div
              class="card-header py-3 d-flex justify-content-between bg-transparent border-bottom-0"
            >
              <h6 class="mb-0 fw-bold">Sales Information</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Sales Account ID</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="salesAccountId"
                    placeholder="Enter sales account ID"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Purchase Account ID</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="purchaseAccountId"
                    placeholder="Enter purchase account ID"
                  />
                </div>
                <div class="col-md-12">
                  <label class="form-label">Sales Description</label>
                  <textarea
                    class="form-control"
                    formControlName="salesDescription"
                    rows="2"
                    placeholder="Description for sales documents"
                  ></textarea>
                </div>
                <div class="col-md-12">
                  <label class="form-label">Purchase Description</label>
                  <textarea
                    class="form-control"
                    formControlName="purchaseDescription"
                    rows="2"
                    placeholder="Description for purchase documents"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Inventory Management Card -->
          <div class="card mb-3">
            <div
              class="card-header py-3 d-flex justify-content-between bg-transparent border-bottom-0"
            >
              <h6 class="mb-0 fw-bold">Inventory Management</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label">Opening Stock</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="openingStock"
                    min="0"
                    placeholder="Initial stock quantity"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Opening Stock Value</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="openingStockValue"
                    min="0"
                    step="0.01"
                    placeholder="Initial stock value"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Reorder Level</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="reorderLevel"
                    min="0"
                    placeholder="Minimum stock level"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Preferred Vendor ID</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="preferredVendorId"
                    placeholder="Primary supplier ID"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Warehouse ID</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="warehouseId"
                    placeholder="Default warehouse ID"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Inventory Account ID</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="inventoryAccountId"
                    placeholder="Inventory tracking account"
                  />
                </div>
              </div>
            </div>
          </div>
          
          <app-product-variant-add></app-product-variant-add>
        </div>
      </div>
    </form>
    <!-- Row end  -->
  </div>
</div>
